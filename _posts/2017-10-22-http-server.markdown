---
layout: post
title:  "WEB服务器经典架构及原理"
date:   2017-10-22 21:12:01 +0800
tags: http php
categories: 其它
---

WEB服务是当今最广泛的服务，大部分语言基本都可以用来构建web服务，包括php python c# java javascript basic ruby等等，当然也有专门为它们服务的web服务器像apache nginx tomcat jetty iis nodejs等等，下面介绍一下它们之间的关系以及web服务能做哪些事情

<!--break-->

## Web服务器

web服务器接收客户的请求并把请求转发给对应的语言解析器处理。php的web服务器比较常用的就是apache 和 nginx，它们收到请求后，将其发送给php-fpm守护进程执行。

## HTTP协议

HTTP协议是一个文本协议，由请求路径信息，请求头和请求体组成。最简单的请求可以只指定请求路径信息(GET /)，这种方式是合法的。
不过通常请求都会带上请求头。注意，请求头要在服务器关注它它才会有意义，否则没有任何意义。

* 请求头可以是任意内容（键和值),它并没有强制的要求。
* 每个请求，浏览器都会带上一些请求头，这些内容标识了它自身的一些状态信息。
* web 服务器可以处理一些头以决定如何响应客户端。当然也可以通过配置使不同请求头路由到不同的地方不过这些是自定义的。
* 通常来说，服务器的应用（写的代码）会用这些头更好的实现一些诸如语言切换，权限认证，身份识别，设备自适应，内容格式化等功能

请求头带的参数一般代表的是站点的属性或是改变这个站点的属性。是站点级的。请求参数则一般是对这次请求的附加说明。是请求级的。。

## WEB服务器结构

我们拿php服务器讲，看其是如何操作服务器资源的，如果与其它服务进行交互的，如下图：

![server](css/images/server.jpg)

* 客户端请求到达nginx可被分流
* nginx可以访问文件系统，直接做为静态服务器
* php进程可以通过其api操作文件系统，数据库及缓存。
* php进程可以通过exec/system等方法启动其它进程当它有足够权限的时候
* 其它进程可以做完成任何服务器拥有的任何功能
* php可以通过网络api请求三方服务

## WEB应用

web应用是完成特定功能的应用程序集合。理论上说，只要计算机能完成的任务都可以以web方式对外服务。大多数情况下，对于前后端分离的应用，它主要是做数据持久化和业务逻辑处理的，在需要时，它可能会调起机器的其它程序或第三方网络服务协助完成它的功能。

典型的像aliyun的主机控制台，我们可以在控制台上管理所有的云资产。我们可以简单的分析一下，当我们发起一个创建ecs的请求，

